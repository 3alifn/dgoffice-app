<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Make Table</title>
    <link rel="shortcut icon" href="media/root.ico" type="image/x-icon">  

    <link rel="stylesheet" href="/dbms.css">
    <link rel="stylesheet" href="/bootstrap.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/selectize.js/0.12.6/js/standalone/selectize.min.js" integrity="sha256-+C0A5Ilqmu4QcSPxrlGpaZxJ04VjsRjKu+G82kl5UJk=" crossorigin="anonymous"></script>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/selectize.js/0.12.6/css/selectize.bootstrap3.min.css" integrity="sha256-ze/OEYGcFbPRmvCnrSeKbRTtjG4vGLHXgOqsyLFTRjg=" crossorigin="anonymous" /> 


</head>

<style> 
    
 
         input{
        width: 100%;
        height: 35px;
        border-radius: 5px;
        border: 1px solid slateblue;
        outline-color: slateblue;
        
    }

</style>

<body  class="alert alert-heading container"> 
        <legend style="background-color: #7f00ff; font-family:'Times New Roman', Times, serif;
        " class=" alert text-center  text-light">Create Table</legend>

 
    <div class=" m-auto"  id="mainDiv">
        <a class="w-50 float-start btn btn-primary text-light" href="/admin.dashboard">Dashboard</a>
        <a class="w-50 float-end   btn btn-warning text-dark " href="/manage.table">Manage Table</a>

<br>
<div></div>

        <form class=" alert-dark" action="/todo.table" method="post">

            <% if(typeof msg != typeof alifn && msg.length>0) {%>
            <div class=" alert <%=alertType%>  container w-50"><%= msg %></div>

 <% } else {%>
    <%=null %> 
    <% } %> 
            <% if(typeof tableName != typeof alifn && tableName.length>0) {%>


                <center>
<br>
                    <input class=" text-danger fw-bold w-75" type="text" name="new_table" id="" value="<%=tableName%>" pattern="^[a-zA-Z0-9_]*$"" placeholder="New Table" required>
                </center>

               
                <% } else {%>
<br>
                   <center>
                    
                    <input class="w-75" type="text" name="new_table" id="" pattern="^[a-zA-Z0-9_]*$"  placeholder="New Table" required>
                   </center>

                  
                    <% } %> 
                    
            <center>
                <p></p>
                <button class="w-25 btn btn-danger text-light" type="submit" value="Save">Save</button>
            </center>
<br>
<hr>
        </form  >
        <% if(table_name.length>0){ %>
            
            <form class=" w-100" action="/todo.column" method="post" style="height: 500px; overflow: auto;"  >
    
                <div id="tableDiv" class="">
                    
                    <center><label class="btn btn-info dropdown-toggle text-dark" for="selectTable">Select Table</label></center> 
                    <select  class="w-100 text-center " name="table_name" id="selectTable">
                        <% for(let i=0; i<table_name.length; i++) { %>
                            <option value="<%=table_name[i].TABLE_NAME %>">
                                <%=table_name[i].TABLE_NAME %>
                            </option>
                            <% } %>
                               
                    </select>
             

</div>
<p></p>

<div id="columnList" style="display: none;">

    <% for(let i=1; i<=15; i++) {%>
    

        <div id="colName">
           <center>
            <input  class=" w-75" type="text" name="colName[]" id="col<%=[i]%>" pattern="^[a-zA-Z0-9_]*$" maxlength="30"  placeholder="Column Name_<%=[i] %>" >
           </center>
      </div>
            <div>
                
          <center>
            <select  name="dataType[]" id="" class="form-control form-control-sm w-25 ">
                <option value="VARCHAR(100)">Text</option>
                <option value="DOUBLE">Number</option>
            </select>
          </center>
        </div>
       <br>
        
        
        <% } %>  
        
 
<center>
    
    <button class="btn btn-secondary w-25" type="submit"  value="Save">Save</button>
</center>
<br>

</form>
           
                        <% } else{ %>
                            <div class=" alert alert-warning container w-50">Table Not Found...</div>

                            <% } %> 

                           
        
    </div>
</div>

    <script>

$("span, option").addClass("text-muted")

document.querySelector("#col1").setAttribute("required", "")


$(document).ready(function () {
      $('#selectTable').selectize({
          sortField: 'text'
      });
  });

  $("#columnList").fadeIn("slow")

    </script>
</body>

</html>